{% extends "layouts/ap-reader.njk" %}

{% from "heading/macro.njk" import heading with context %}
{% from "prose/macro.njk" import prose with context %}

{% block readercontent %}
  {% if items.length > 0 %}
    <div class="ap-notifications__toolbar">
      {% if unreadCount > 0 %}
        <form method="post" action="{{ mountPath }}/admin/reader/notifications/mark-read">
          <input type="hidden" name="_csrf" value="{{ csrfToken }}">
          <button type="submit" class="ap-notifications__btn">{{ __("activitypub.notifications.markAllRead") }}</button>
        </form>
      {% endif %}
      <form method="post" action="{{ mountPath }}/admin/reader/notifications/clear"
            onsubmit="return confirm('{{ __("activitypub.notifications.clearConfirm") }}')">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">
        <button type="submit" class="ap-notifications__btn ap-notifications__btn--danger">{{ __("activitypub.notifications.clearAll") }}</button>
      </form>
    </div>

    <div class="ap-timeline">
      {% for item in items %}
        {% include "partials/ap-notification-card.njk" %}
      {% endfor %}
    </div>

    {# Pagination #}
    {% if before %}
      <nav class="ap-pagination">
        <a href="?before={{ before }}" class="ap-pagination__next">
          {{ __("activitypub.reader.pagination.older") }}
        </a>
      </nav>
    {% endif %}
  {% else %}
    {{ prose({ text: __("activitypub.notifications.empty") }) }}
  {% endif %}
{% endblock %}
