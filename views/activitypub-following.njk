{% extends "document.njk" %}

{% from "heading/macro.njk" import heading with context %}
{% from "card/macro.njk" import card with context %}
{% from "prose/macro.njk" import prose with context %}
{% from "badge/macro.njk" import badge with context %}
{% from "pagination/macro.njk" import pagination with context %}

{% block content %}
  {{ heading({ text: followingCount + " " + __("activitypub.following"), level: 1, parent: { text: __("activitypub.title"), href: mountPath } }) }}

  {% if following.length > 0 %}
    {% for account in following %}
      {{ card({
        title: account.name or account.handle or account.actorUrl,
        url: account.actorUrl,
        description: { text: "@" + account.handle if account.handle },
        published: account.followedAt,
        badges: [{ text: __("activitypub.sourceImport") if account.source === "import" else __("activitypub.sourceFederation") }]
      }) }}
    {% endfor %}

    {{ pagination(cursor) if cursor }}
  {% else %}
    {{ prose({ text: __("activitypub.noFollowing") }) }}
  {% endif %}
{% endblock %}
