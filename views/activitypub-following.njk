{% extends "document.njk" %}

{% from "heading/macro.njk" import heading with context %}
{% from "card/macro.njk" import card with context %}
{% from "prose/macro.njk" import prose with context %}
{% from "badge/macro.njk" import badge with context %}
{% from "pagination/macro.njk" import pagination with context %}

{% block content %}
  {% if following.length > 0 %}
    {% for account in following %}
      {% if account.source === "import" %}
        {% set sourceBadge = __("activitypub.sourceImport") %}
      {% elif account.source === "refollow:sent" %}
        {% set sourceBadge = __("activitypub.sourceRefollowPending") %}
      {% elif account.source === "refollow:failed" %}
        {% set sourceBadge = __("activitypub.sourceRefollowFailed") %}
      {% else %}
        {% set sourceBadge = __("activitypub.sourceFederation") %}
      {% endif %}
      {{ card({
        title: account.name or account.handle or account.actorUrl,
        url: account.actorUrl,
        description: { text: "@" + account.handle if account.handle },
        published: account.followedAt,
        badges: [{ text: sourceBadge }]
      }) }}
    {% endfor %}

    {{ pagination(cursor) if cursor }}
  {% else %}
    {{ prose({ text: __("activitypub.noFollowing") }) }}
  {% endif %}
{% endblock %}
