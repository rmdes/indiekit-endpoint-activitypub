{% extends "document.njk" %}

{% block content %}
  {# Infinite scroll component — must load before Alpine to register via alpine:init #}
  <script defer src="/assets/@rmdes-indiekit-endpoint-activitypub/reader-infinite-scroll.js"></script>
  {# Autocomplete components for explore + popular accounts #}
  <script defer src="/assets/@rmdes-indiekit-endpoint-activitypub/reader-autocomplete.js"></script>
  {# Deck components — apDeckToggle and apDeckColumn #}
  <script defer src="/assets/@rmdes-indiekit-endpoint-activitypub/reader-decks.js"></script>

  {# Alpine.js for client-side reactivity (CW toggles, interaction buttons, infinite scroll) #}
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.9/dist/cdn.min.js"></script>

  {# Reader stylesheet — loaded in body is fine for modern browsers #}
  <link rel="stylesheet" href="/assets/@rmdes-indiekit-endpoint-activitypub/reader.css">
  <link rel="stylesheet" href="/assets/@rmdes-indiekit-endpoint-activitypub/reader-links.css">

  {# AP link interception for internal navigation #}
  <script defer src="/assets/@rmdes-indiekit-endpoint-activitypub/reader-links.js"></script>

  {% if readerParent %}
  <nav class="ap-breadcrumb" aria-label="Breadcrumb">
    <a href="{{ readerParent.href }}">{{ readerParent.text }}</a>
    <span class="ap-breadcrumb__separator" aria-hidden="true">/</span>
    <span class="ap-breadcrumb__current" aria-current="page">{{ title }}</span>
  </nav>
  {% endif %}

  {% block readercontent %}
  {% endblock %}
{% endblock %}
